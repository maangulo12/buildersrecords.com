{% extends "layout.html" %}
{% block title %} BuildersRecords {% endblock %}
{% block scripts %}<script src="{{ url_for('static', filename='js/user_home.js') }}"></script>{% endblock %}
{% block body %}
    <body class="body">
        <!-- Navigation Bar -->
        <nav class="navbar navbar-default">
            <div class="container">
                <!-- Navigation Bar Header -->
                <div class="navbar-header">
                    <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only"> Toggle navigation </span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- Navigation Bar Brand -->
                    <a class="navbar-brand" href="{{ url_for('home') }}"> BuildersRecords </a>
                </div>
                <!-- Navigation Bar List Items -->
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/account/">
                              <span class="glyphicon glyphicon-user" aria-hidden="true"></span> <b> {{ username }} </b>
                            </a>
                        </li>
                        <li style="padding-left: 0.75em;">
                            <button id="logoff_button" style="width: 6.5em" type="button" class="btn btn-danger navbar-btn">
                                <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> <b> Log Off </b>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
        <!-- Alert -->
        <div class="container">
            <div id="alert" class="alert alert-info alert-dismissible text-center" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true"> &times; </span>
                </button> <b> {{ message }} </b>
            </div>
        </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
        <!-- Buttons -->
        <div class="container">
            <div class="page-header">
                <h1> My Projects </h1>
              {% if not project_list %}
                <h4 class="text-muted"> Start a new project </h4>
              {% else %}
                <h4 class="text-muted"> Choose a project </h4>
              {% endif %}
            </div>
        </div>
        <!-- Buttons -->
        <div class="container">
            <button id="new_project_button" type="button" class="btn btn-success">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                <b> New Project </b>
            </button>
            <button id="new_project_button" type="button" class="btn btn-danger">
                <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                <b> Delete </b>
            </button>
        </div>
        <br>
        <!-- Table -->
        <div class="container">
            <table class="table table-striped table-hover table-bordered">
                <thead>
                    <tr>
                        <th> <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> </th>
                        <th> Project Name</th>
                        <th> Project Type </th>
                        <th> Address </th>
                        <th> Total Cost </th>
                        <th> Action </th>
                    <tr>
                </thead>
              {% for project in project_list %}
                <tbody>
                    <tr>
                        <td><input id="checkbox{{ project.project_id }}" type="checkbox"></td>
                        <td><a href="/{{ username }}/{{ project.project_id }}/dashboard/"><b> {{ project.project_name }} </b></a></td>
                        <td> {{ project.project_type }} </td>
                        <td> {{ project.address }} <br> {{ project.city }}, {{ project.state }} {{ project.zipcode }} </td>
                        <td class="text-success"> ${{ project.project_cost }} </td>
                        <td><button id="delete_button{{ project.project_id }}" type="button" class="btn btn-danger"
                                    data-toggle="tooltip" data-placement="top" title="Delete">
                                <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                            </button>
                            <button id="edit_button{{ project.project_id }}" type="button" class="btn btn-primary"
                                    data-toggle="tooltip" data-placement="top" title="Edit">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            </button>
                        </td>
                    </tr>
                </tbody>
              {% endfor %}
              {% if not project_list %}
                <tbody>
                    <tr>
                        <td colspan="1"></td>
                        <td colspan="5">
                            <a href="/new/"> <b> Create New Project </b> </a>
                        </td>
                    </tr>
                </tbody>
              {% endif %}
            </table>
        </div>{{ super() }}
    </body>{% endblock %}
